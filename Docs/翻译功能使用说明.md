# LanguageOne 完整使用指南

## 📖 功能说明

### 语言切换
在两种语言之间快速切换，支持 11 种语言。

### 注释翻译
翻译蓝图节点的注释文本，支持选中翻译或全图翻译。

---

## 🚀 基础使用

### 切换编辑器语言

**快捷键：** `Alt + Q`

**步骤：**
1. 打开 `编辑 > 编辑器偏好设置 > 插件 > LanguageOne`
2. 选择"目标语言"（如：中文简体）
3. 按 `Alt + Q` 即可切换
4. 再按一次切回原语言

**支持的语言：**
- 中文（简体/繁体）
- 英语、日语、韩语
- 德语、法语、西班牙语、俄语
- 葡萄牙语、意大利语

---

### 翻译蓝图节点注释

**快捷键：** `Alt + E`

**功能说明：**
在蓝图编辑器中翻译节点注释文本：

- **选中节点** → 只翻译选中的节点注释
- **未选中** → 翻译整个图表的所有节点注释
- **再按一次** → 还原为原文（可反复切换）

---

### 翻译资产内容

**功能说明：**
通过 Content Browser 右键菜单或资产翻译工具批量翻译各种资产中的文本内容。

**支持的资产类型：**
- **String Table** → 翻译所有字符串条目（使用零宽字符标记保留原文）
- **Data Table** → 翻译文本字段
- **Widget Blueprint** → 翻译 UI 控件文本
- **Blueprint** → 翻译变量描述、函数注释、节点注释
- **其他资产** → 翻译资产元数据

**使用方法：**
1. 在 Content Browser 中选择要翻译的资产（可多选）
2. 右键点击资产
3. 选择 "资产翻译 | Asset Translation"
4. 打开**资产翻译工具窗口**

**资产翻译工具窗口功能：**

工具窗口会显示：
- 📦 **可处理资产数量**：支持翻译的资产个数
- ⚠ **不支持的资产**：会被自动过滤（如不支持的资产类型）
- 💡 **实时提示**：当前操作的提示信息

**可用操作：**

| 按钮 | 功能说明 | 使用场景 |
|------|---------|---------|
| **🌐 翻译** | 智能批量翻译，自动补全未翻译部分，跳过已翻译部分 | 主要功能按钮 |
| **🔄 还原** | 移除翻译，恢复为原文 | 需要还原时使用 |
| **🗑️ 清除原文** | 永久删除原文，只保留译文（危险操作） | 确认翻译无误后使用 |
| **关闭** | 手动关闭工具窗口 | 完成操作后关闭 |

**翻译按钮的智能行为：**
- ✅ **全部未翻译** → 开始翻译所有资产
- ✅ **混合状态** → 智能处理：只翻译未翻译的文本，已翻译的进行格式检查或跳过
- ✅ **已翻译状态** → 检查并修复格式（如需切换显示，请使用工具栏 Alt+Q 或 Alt+E）

**进度显示：**
工具窗口底部会实时显示处理进度：
- ✓ **成功**：成功处理的资产数
- ✗ **失败**：处理失败的资产数
- ⚠ **不支持**：不支持翻译的资产数（固定值）

完成后会显示总结信息，如：
- "✓ 完成！已成功处理 5 个资产"

**技术细节：**
- **双语格式**：使用 `译文\n---\n原文` 格式，原文用零宽字符标记（`ZWSP+ZWNJ...ZWSP+ZWJ`）
- **Data Table** 自动识别 `FText` 类型字段和包含 `text`、`desc`、`comment` 等关键字的 `FString` 字段
- **Widget Blueprint** 支持 `UTextBlock`、`UEditableText`、`UButton`、`UCheckBox` 等组件
- **Blueprint** 使用安全的元数据访问，避免 ControlRig 等特殊蓝图类型崩溃
- **实时状态检测**：工具会实时检测资产的翻译状态，即使在外部修改也能正确识别

**使用场景示例：**

| 场景 | 操作 | 效果 |
|------|------|------|
| 蓝图节点注释 | 蓝图编辑器中按 `Alt + E` | 翻译/还原节点注释 |
| String Table | Content Browser 右键 String Table | 翻译所有条目 |
| Data Table | Content Browser 右键 Data Table | 翻译文本字段 |
| Widget Blueprint | Content Browser 右键 Widget | 翻译 UI 文本 |
| 批量翻译 | Content Browser 右键多个资产 | 批量翻译资产 |

---

## ⚙️ 翻译设置详解

**打开设置：** `编辑 > 编辑器偏好设置 > 插件 > LanguageOne`

### 翻译服务

**免费服务（推荐，无需配置）：**
- **微软Edge翻译** - 默认推荐，质量高，速度快，国内可用
- **谷歌翻译** - 经典服务，质量稳定（国内可能受限）
- **MyMemory翻译** - 备用选项，无需密钥

**API 服务（需要配置）：**
- **百度翻译** - 免费 200 万字符/月
- **Google API** - 付费，质量最好
- **自定义 API** - 使用自己的服务

### 翻译选项

**注释翻译：**
| 选项 | 说明 | 推荐 |
|------|------|:---:|
| 翻译服务 | 选择使用哪个翻译服务 | 微软Edge翻译 |
| 翻译成 | 选择翻译目标语言 | 根据需要 |
| 译文在上方 | 译文显示位置（原文始终保留） | 看个人喜好 |

**资产翻译：**
| 选项 | 说明 | 推荐 |
|------|------|:---:|
| 启用资产翻译 | 在右键菜单显示翻译选项 | ✅ |
| 翻译前确认 | 批量翻译前显示确认对话框 | 看个人喜好 |
| 详细日志 | 输出详细的翻译日志 | ✅ |

**注意事项：**
- 自 v1.4 起，资产翻译默认会保留原文（使用零宽字符标记），可以随时切换显示或还原
- 如需永久删除原文，可使用工具窗口中的"清除原文"按钮
- 翻译完成后需要**手动保存（Ctrl+S）**，插件不会自动保存资产
- 操作进行中会禁止新的操作，防止状态混乱

### 翻译结果示例

**译文在下（默认）：**
```
Original English comment
---
翻译后的中文注释
```

**译文在上（勾选设置）：**
```
翻译后的中文注释
---
Original English comment
```

**清除原文后（永久）：**
```
翻译后的中文注释
```

**技术说明：**
- 原文使用零宽字符标记（`ZWSP+ZWNJ...ZWSP+ZWJ`），不可见但可被程序识别
- `---` 作为可见分隔符，方便阅读
- 可以随时使用"翻译/切换"按钮切换显示顺序
- 使用"还原"按钮可恢复为纯原文
- 使用"清除原文"按钮可永久删除原文标记

---

## 🔧 API 配置（可选）

### 百度翻译（推荐）

**优势：** 免费额度大（200 万字符/月）、质量好、速度快

**步骤：**
1. 访问 [百度翻译开放平台](https://fanyi-api.baidu.com/)
2. 注册账号并登录
3. 创建应用（通用文本翻译）
4. 复制 **APP ID** 和 **密钥**
5. 在插件设置中粘贴

### Google 翻译 API

**优势：** 质量最好

**步骤：**
1. 访问 [Google Cloud Console](https://console.cloud.google.com/)
2. 创建项目并启用 Translation API
3. 创建 API 密钥
4. 在插件设置中粘贴

### 自定义 API

**要求：**
- POST 请求
- 请求：`{"text": "...", "target_lang": "..."}`
- 响应：`{"translated_text": "..."}`
- 可选：`Authorization: Bearer YOUR_KEY`

---

## 💡 使用技巧

### 1. 快速翻译整个蓝图
打开蓝图 → 直接按 `Alt + E` → 完成

### 2. 精确翻译部分节点
Ctrl + 点击选择节点 → `Alt + E`

### 3. 对照学习
翻译后自动保留原文 → 可对照原文学习

### 4. 批量还原
选中已翻译的节点 → `Alt + E` → 还原

### 5. 翻译 String Table
选中 String Table → 右键 → "资产翻译"

### 6. 批量翻译多个资产
Content Browser 中 Ctrl + 点击选择多个资产 → 右键 → "资产翻译"

### 7. 翻译示例项目
UE 官方示例中的资产也可以翻译，帮助理解示例内容

### 8. 修改快捷键
`编辑 > 编辑器偏好设置 > 快捷键 > 搜索 LanguageOne`

### 9. 智能工具窗口
资产翻译工具能智能处理混合选择，并提供清晰的操作反馈

### 10. 批量还原翻译
使用"资产翻译工具"界面，选择已翻译的资产，点击"还原"按钮批量还原

### 11. 智能混合状态处理
当同时选中已翻译和未翻译的资产时，点击"翻译/切换"按钮：
- 工具会自动分类：未翻译的→翻译，已翻译的→切换显示
- 显示通知告知操作详情，如"混合状态：2个切换，3个翻译"

### 12. 清除原文的安全使用
"清除原文"按钮会永久删除原文标记：
- ⚠️ **危险操作**：无法恢复，请谨慎使用
- 使用前确认翻译质量无误
- 适用于最终发布前清理，减少文件大小
- 点击后会弹出二次确认对话框

---

## ❓ 常见问题

**Q: 快捷键不起作用？**
- 重启编辑器
- 查看输出日志确认插件是否加载
- 检查快捷键是否冲突

**Q: 检测不到选中的节点？**
- 正常！未选中时会翻译整个图表
- 如果需要只翻译部分，先选中节点

**Q: 翻译失败？**
- 检查网络连接
- 切换其他翻译服务
- 查看输出日志查看错误信息

**Q: 免费服务有限制吗？**
- 有频率限制，但正常使用完全够用
- 如遇限制，可切换其他免费服务
- 或配置百度翻译 API（免费 200 万字符/月）

**Q: 翻译质量不理想？**
- 尝试切换其他翻译服务
- 配置 Google API（质量最好）
- 保留原文对照查看

**Q: 资产翻译后无法还原？**
- v1.4+ 默认保留原文（使用零宽字符标记）
- 可以使用工具窗口的"还原"按钮随时还原
- 只有使用"清除原文"功能后才无法还原
- 建议使用版本控制保护重要资产

**Q: 哪些资产支持翻译？**
- String Table（字符串表）
- Data Table（数据表，文本字段）
- Widget Blueprint（UI 控件文本）
- Blueprint（变量描述、注释）
- 其他资产的描述信息

**Q: 翻译后的原文会在游戏中显示吗？**
- 不会！原文使用零宽字符标记，对游戏不可见
- 可以使用"译文在上方"设置控制显示顺序
- 可以使用"翻译/切换"按钮随时切换显示
- 如需彻底删除原文，使用"清除原文"功能

**Q: 翻译后资产无法打开？**
- 使用版本控制还原
- 或手动修正文本格式
- 检查输出日志查看错误详情

**Q: 翻译进度卡住？**
- 检查网络连接
- 切换其他翻译服务（微软 Edge → 谷歌翻译 → MyMemory）
- 重启编辑器后重试
- 查看输出日志确认具体错误

**Q: 不支持的资产会如何处理？**
- 工具会自动过滤不支持的资产
- 不支持的资产数量会固定显示在进度条中
- 只有支持的资产会被处理，进度条以支持的资产数量计算
- 不支持的资产类型包括：Texture、Material、Sound 等非文本资产

---

## 📝 版本历史

### v1.5 (当前)
- ⌨️ 注释翻译快捷键从 `Ctrl+T` 改为 `Alt+E`，避免快捷键冲突
- 🐛 修复蓝图选中节点翻译会翻译整个图表的问题

### v1.4
- ✨ 全新的资产翻译工具窗口，支持批量处理
- ✨ 智能"翻译/切换"按钮，根据资产状态自动选择操作
- ✨ 新增"还原"和"清除原文"功能，灵活管理翻译
- 🎨 集成进度条，实时显示处理结果
- 🎨 优化界面布局，信息显示更清晰直观
- 🔧 改进翻译状态检测，支持实时更新
- 🔧 优化混合状态处理（同时处理已翻译和未翻译资产）
- 📝 使用零宽字符标记原文，格式更规范
- 📝 完善文档，新增使用技巧
- ⚠️ **不再支持 UE 4.x (4.26/4.27) 和 UE 5.0**，因维护成本过高，后续仅支持 UE 5.1+。如需使用，请安装旧版本插件。

### v1.3
- 🔧 修复接口问题
- 🔧 修改默认接口

### v1.2
- 蓝图注释翻译功能
- 3 种免费翻译服务
- 11 种编辑器语言支持
- 智能还原功能
- 支持翻译整个图表

### v1.1
- 改进语言切换稳定性
- UE5.7 兼容性修复

### v1.0
- 初始版本发布
- 中英文语言切换

---

<div align="center">

**问题反馈：** [GitHub Issues](https://github.com/AniBullet/LanguageOne/issues)

**开源项目 · 欢迎贡献 · Star ⭐**

</div>
